# 对象优先在Eden分配



# 大对象直接进入老年代



可以通过`-XX:PretenureSizeThreshold`（只对Serial和Parnew两款收集器有效）参数设置大于设置值的对象直接在老年代中分配，这样做的目的是为了避免在Eden区及两个Survivor区之间来回复制。

# 长期存活的对象将进入老年代




# 动态对象年龄判断

但并不是永远要求对象的年龄必须达到`-XX:MaxTenuringThreshold`中要求的年龄，如果在Survivor空间中相同年龄所有对象的总和大于Survivor空间的一半，年龄大于或等于该年龄的对象就可以直接进入老年代。



# 空间分配担保

在发生Minor GC之前，虚拟机必须先检查老年代最大可用的连续空间是否大于新生代所有对象总空间，如果这个条件成立，那么这一次Minor GC就是安全的。如果不成立，则虚拟机会先查看`-XX:HandlePromotionFailture`参数的设置值是否允许担保失败，如果允许，那会继续检查老年代最大可用的连续空间是否大于历次晋升到老年代对象的平均大小，如果大于，将尝试进行一次Minor GC, 尽管这次Minor GC是有风险的；如果小于，则进行一次Full GC。